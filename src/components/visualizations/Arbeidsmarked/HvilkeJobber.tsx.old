import React, { Component } from "react";

import "./HvilkeJobber.scss";
import { updateStats, updateTSVData } from "./HvilkeJobberHelperMethods";
import Translate, { TranslateString } from "../../app/Translate";
import UnoId from "../../app/UnoId";
import { FilterTypes } from "./Mappings";


type Props = {
  data: Array<any>;

  unoId: string;
  filter: FilterTypes;
};

class HvilkeJobber extends Component<Props> {
  myRefs: {
    container: React.RefObject<HTMLDivElement>;
    chart: React.RefObject<SVGSVGElement>;
    info: React.RefObject<HTMLDivElement>;
  } = {
    container: React.createRef<HTMLDivElement>(),
    chart: React.createRef<SVGSVGElement>(),
    info: React.createRef<HTMLDivElement>(),
  };
  defaultSelectedFilter = "antall_personer";
  constructor(props: Props) {
    super(props);
    this.state = { selectedFilter: this.props. };
  }
  onFilterSelect: ((className: string) => void) | null = null;


  componentDidMount() {
    updateTSVData(this.props.data, this.myRefs);
  }

  handleChangeFilter = (event: React.MouseEvent<HTMLButtonElement>) => {
    var className = event.currentTarget.getAttribute("data-type");
    if (!className) return;
    this.setState({ selectedFilter: className });
    if (this.onFilterSelect) this.onFilterSelect(className);
    updateStats(this.props.data, className);
  };

  render() {
    const { selectedFilter } = this.state;
    const { unoId } = this.props;
    return (
      <div>
        <h1>
          <Translate
            nb="Hva jobber de som er utdannet %unoId% som?"
            replacements={{ "%unoId%": <UnoId uno_id={unoId} /> }}
          />
        </h1>
        <header className="hvilkejobber_d3-control-panel">
          <section>
            <h2>
              <Translate nb="Vis" />
            </h2>
            
          </section>
          <section>
            <h2 className="hvilkejobber_color-header">
              <Translate nb="Sorter etter" />
            </h2>
            <div className="hvilkejobber_color-controler" />
          </section>
        </header>
        <div className="hvilkejobber_container">
          <div
            className="hvilkejobber_chart-container"
            id="hvilkejobber_container"
            ref={this.myRefs.container}
          >
            <svg id="hvilkejobber_chart" ref={this.myRefs.chart} />
            <div id="hvilkejobber_info" ref={this.myRefs.info}>
              <div className="hvilkejobber_title">infoTitle</div>
              <div className="hvilkejobber_desc" />
            </div>
          </div>
        </div>
      </div>
    );
  }
}

export default HvilkeJobber;
